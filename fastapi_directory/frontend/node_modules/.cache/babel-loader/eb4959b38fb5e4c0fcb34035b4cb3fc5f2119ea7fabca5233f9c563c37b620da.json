{"ast":null,"code":"import _objectSpread from\"C:/Project/Errors/fastapi_directory/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";const API_BASE_URL=\"/api\";function getAuthHeaders(){const token=localStorage.getItem(\"access_token\");console.log(\"Access token from localStorage:\",token);if(!token){console.error(\"No access token found, please login\");throw new Error(\"No access token found, please login\");}return{Authorization:\"Bearer \".concat(token)};}export async function fetchUsers(){const response=await fetch(\"\".concat(API_BASE_URL,\"/users/\"),{headers:_objectSpread({},getAuthHeaders())});if(!response.ok){throw new Error(\"Failed to fetch users\");}return await response.json();}export async function createUser(userData){const response=await fetch(\"\".concat(API_BASE_URL,\"/users/\"),{method:\"POST\",headers:_objectSpread({\"Content-Type\":\"application/json\"},getAuthHeaders()),body:JSON.stringify(userData)});if(!response.ok){throw new Error(\"Failed to create user\");}return await response.json();}export async function fetchErrors(){const response=await fetch(\"\".concat(API_BASE_URL,\"/errors/\"),{headers:_objectSpread({},getAuthHeaders())});if(!response.ok){throw new Error(\"Failed to fetch errors\");}return await response.json();}export async function deleteUser(userId){const response=await fetch(\"\".concat(API_BASE_URL,\"/users/\").concat(userId),{method:\"DELETE\",headers:_objectSpread({},getAuthHeaders())});if(!response.ok){throw new Error(\"Failed to delete user\");}return true;}export async function updateUserRole(userId,newRoleId){const response=await fetch(\"\".concat(API_BASE_URL,\"/users/\").concat(userId,\"/role\"),{method:\"PUT\",headers:_objectSpread({\"Content-Type\":\"application/json\"},getAuthHeaders()),body:JSON.stringify({role_id:newRoleId})});if(!response.ok){throw new Error(\"Failed to update user role\");}return await response.json();}export async function createError(errorData){// Отправляем данные как FormData с local_kw\nconst url=new URL(\"\".concat(API_BASE_URL,\"/errors/\"));const formData=new FormData();formData.append(\"name\",errorData.name);if(errorData.description){formData.append(\"description\",errorData.description);}if(errorData.solution_description){formData.append(\"solution_description\",errorData.solution_description);}if(errorData.files&&errorData.files.length>0){errorData.files.forEach(file=>{formData.append(\"files\",file);});}const response=await fetch(url.toString(),{method:\"POST\",headers:_objectSpread({},getAuthHeaders()),body:formData});if(!response.ok){throw new Error(\"Failed to create error\");}return await response.json();}export async function updateError(errorId,errorData){const response=await fetch(\"\".concat(API_BASE_URL,\"/errors/\").concat(errorId),{method:\"PUT\",headers:_objectSpread({\"Content-Type\":\"application/json\"},getAuthHeaders()),body:JSON.stringify(errorData)});if(!response.ok){throw new Error(\"Failed to update error\");}return await response.json();}export async function deleteError(errorId){const response=await fetch(\"\".concat(API_BASE_URL,\"/errors/\").concat(errorId),{method:\"DELETE\",headers:_objectSpread({},getAuthHeaders())});if(!response.ok){throw new Error(\"Failed to delete error\");}return true;}export async function uploadErrorImage(errorId,file){const formData=new FormData();formData.append(\"file\",file);const response=await fetch(\"\".concat(API_BASE_URL,\"/errors/\").concat(errorId,\"/images/\"),{method:\"POST\",headers:_objectSpread({},getAuthHeaders()),body:formData});if(!response.ok){throw new Error(\"Failed to upload error image\");}return await response.json();}// New function to fetch contact infos with local_kw=1\nexport async function fetchContactInfos(){const url=new URL(\"\".concat(API_BASE_URL,\"/contact_info/\"));url.searchParams.append(\"local_kw\",\"1\");const response=await fetch(url.toString(),{headers:_objectSpread({},getAuthHeaders())});if(!response.ok){throw new Error(\"Failed to fetch contact infos\");}return await response.json();}// Add more API client functions as needed for other endpoints","map":{"version":3,"names":["API_BASE_URL","getAuthHeaders","token","localStorage","getItem","console","log","error","Error","Authorization","concat","fetchUsers","response","fetch","headers","_objectSpread","ok","json","createUser","userData","method","body","JSON","stringify","fetchErrors","deleteUser","userId","updateUserRole","newRoleId","role_id","createError","errorData","url","URL","formData","FormData","append","name","description","solution_description","files","length","forEach","file","toString","updateError","errorId","deleteError","uploadErrorImage","fetchContactInfos","searchParams"],"sources":["C:/Project/Errors/fastapi_directory/frontend/src/apiClient.js"],"sourcesContent":["const API_BASE_URL = \"/api\";\r\n\r\nfunction getAuthHeaders() {\r\n  const token = localStorage.getItem(\"access_token\");\r\n  console.log(\"Access token from localStorage:\", token);\r\n  if (!token) {\r\n    console.error(\"No access token found, please login\");\r\n    throw new Error(\"No access token found, please login\");\r\n  }\r\n  return { Authorization: `Bearer ${token}` };\r\n}\r\n\r\nexport async function fetchUsers() {\r\n  const response = await fetch(`${API_BASE_URL}/users/`, {\r\n    headers: {\r\n      ...getAuthHeaders(),\r\n    },\r\n  });\r\n  if (!response.ok) {\r\n    throw new Error(\"Failed to fetch users\");\r\n  }\r\n  return await response.json();\r\n}\r\n\r\nexport async function createUser(userData) {\r\n  const response = await fetch(`${API_BASE_URL}/users/`, {\r\n    method: \"POST\",\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n      ...getAuthHeaders(),\r\n    },\r\n    body: JSON.stringify(userData),\r\n  });\r\n  if (!response.ok) {\r\n    throw new Error(\"Failed to create user\");\r\n  }\r\n  return await response.json();\r\n}\r\n\r\nexport async function fetchErrors() {\r\n  const response = await fetch(`${API_BASE_URL}/errors/`, {\r\n    headers: {\r\n      ...getAuthHeaders(),\r\n    },\r\n  });\r\n  if (!response.ok) {\r\n    throw new Error(\"Failed to fetch errors\");\r\n  }\r\n  return await response.json();\r\n}\r\n\r\nexport async function deleteUser(userId) {\r\n  const response = await fetch(`${API_BASE_URL}/users/${userId}`, {\r\n    method: \"DELETE\",\r\n    headers: {\r\n      ...getAuthHeaders(),\r\n    },\r\n  });\r\n  if (!response.ok) {\r\n    throw new Error(\"Failed to delete user\");\r\n  }\r\n  return true;\r\n}\r\n\r\nexport async function updateUserRole(userId, newRoleId) {\r\n  const response = await fetch(`${API_BASE_URL}/users/${userId}/role`, {\r\n    method: \"PUT\",\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n      ...getAuthHeaders(),\r\n    },\r\n    body: JSON.stringify({ role_id: newRoleId }),\r\n  });\r\n  if (!response.ok) {\r\n    throw new Error(\"Failed to update user role\");\r\n  }\r\n  return await response.json();\r\n}\r\n\r\nexport async function createError(errorData) {\r\n  // Отправляем данные как FormData с local_kw\r\n  const url = new URL(`${API_BASE_URL}/errors/`);\r\n\r\n  const formData = new FormData();\r\n  formData.append(\"name\", errorData.name);\r\n  if (errorData.description) {\r\n    formData.append(\"description\", errorData.description);\r\n  }\r\n  if (errorData.solution_description) {\r\n    formData.append(\"solution_description\", errorData.solution_description);\r\n  }\r\n  if (errorData.files && errorData.files.length > 0) {\r\n    errorData.files.forEach((file) => {\r\n      formData.append(\"files\", file);\r\n    });\r\n  }\r\n\r\n  const response = await fetch(url.toString(), {\r\n    method: \"POST\",\r\n    headers: {\r\n      ...getAuthHeaders(),\r\n    },\r\n    body: formData,\r\n  });\r\n  if (!response.ok) {\r\n    throw new Error(\"Failed to create error\");\r\n  }\r\n  return await response.json();\r\n}\r\n\r\nexport async function updateError(errorId, errorData) {\r\n  const response = await fetch(`${API_BASE_URL}/errors/${errorId}`, {\r\n    method: \"PUT\",\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n      ...getAuthHeaders(),\r\n    },\r\n    body: JSON.stringify(errorData),\r\n  });\r\n  if (!response.ok) {\r\n    throw new Error(\"Failed to update error\");\r\n  }\r\n  return await response.json();\r\n}\r\n\r\nexport async function deleteError(errorId) {\r\n  const response = await fetch(`${API_BASE_URL}/errors/${errorId}`, {\r\n    method: \"DELETE\",\r\n    headers: {\r\n      ...getAuthHeaders(),\r\n    },\r\n  });\r\n  if (!response.ok) {\r\n    throw new Error(\"Failed to delete error\");\r\n  }\r\n  return true;\r\n}\r\n\r\nexport async function uploadErrorImage(errorId, file) {\r\n  const formData = new FormData();\r\n  formData.append(\"file\", file);\r\n\r\n  const response = await fetch(`${API_BASE_URL}/errors/${errorId}/images/`, {\r\n    method: \"POST\",\r\n    headers: {\r\n      ...getAuthHeaders(),\r\n    },\r\n    body: formData,\r\n  });\r\n  if (!response.ok) {\r\n    throw new Error(\"Failed to upload error image\");\r\n  }\r\n  return await response.json();\r\n}\r\n\r\n// New function to fetch contact infos with local_kw=1\r\nexport async function fetchContactInfos() {\r\n  const url = new URL(`${API_BASE_URL}/contact_info/`);\r\n  url.searchParams.append(\"local_kw\", \"1\");\r\n\r\n  const response = await fetch(url.toString(), {\r\n    headers: {\r\n      ...getAuthHeaders(),\r\n    },\r\n  });\r\n  if (!response.ok) {\r\n    throw new Error(\"Failed to fetch contact infos\");\r\n  }\r\n  return await response.json();\r\n}\r\n\r\n// Add more API client functions as needed for other endpoints\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}